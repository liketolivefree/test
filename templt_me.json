{
  "log": {
    "disabled": false,
    "level": "info",
    "output": "box.log",
    "timestamp": false
  },
  "dns":{
    "servers":[
      {"address":"https://94.140.14.14/dns-query","tag":"direct-dns"},
      {"address":"https://9.9.9.9/dns-query","tag":"remote-dns"}
    ],
    "rules":[
      {"outbound":"qqoli","server": "remote-dns"},
      {"outbound":"direct","server": "direct-dns"}
    ],
    "final":"remote-dns",
    "strategy": "prefer_ipv4",
    "disable_cache": false,
    "disable_expire": false,
    "independent_cache": false,
    "reverse_mapping": false
  },
  "inbounds":[
    {
      "type":"tun",
      "tag":"tun-in",
      "interface_name":"tun0",
      "mtu":9000,
      "address":"172.19.0.1/30",
      "auto_route":true,
      "strict_route":true,
      "stack":"system",
      "platform":{"http_proxy":{"enabled":true,"server":"127.0.0.1","server_port":7890}}
    },
    {"type":"mixed","tag":"mixed-in","listen":"127.0.0.1","listen_port":7891}
  ],
  "outbounds":[
    {"type":"selector","tag":"qqoli","outbounds":["mmobi","{all}"],"default":"mmobi","interrupt_exist_connections":false},
    {"type":"urltest","tag":"mmobi","outbounds":["{all}"],"url":"https://www.gstatic.com/generate_204","interval":"5m","tolerance":15,"interrupt_exist_connections":false},
    {"type":"direct","tag":"direct"}
  ],
  "route":{
    "final":"qqoli",
    "auto_detect_interface":true,
    "override_android_vpn":true,
    "rules":[
      {"action":"sniff","inbound":"tun-in","timeout":"1s"},
      {"action":"sniff","inbound":"mixed-in","timeout":"1s"},
      {"action":"resolve","inbound":"tun-in","strategy":"prefer_ipv4"},
      {"action":"resolve","inbound":"mixed-in","strategy":"prefer_ipv4"},
      {"action":"hijack-dns","protocol":"dns"},
      {"action":"hijack-dns","port":53},      
      {"action":"reject","method":"default","no_drop":false,"protocol":"quic"},
      {"action":"reject","method":"default","no_drop":false,"protocol":"stun"},
      {"action":"reject","method":"default","no_drop":false,"ip_cidr":["224.0.0.0/3","10.10.34.0/24"]},
      {"action":"reject","method":"default","no_drop":false,"source_ip_cidr":["224.0.0.0/3","10.10.34.0/24"]},
      {"action":"reject","method":"default","no_drop":false,"type":"logical","mode":"and","rules":[{"network":"tcp"},{"port":853}]},
      {"action":"reject","method":"default","no_drop":false,"type":"logical","mode":"and","rules":[{"network":"udp"},{"port":443}]},
      {"action":"reject","method":"default","no_drop":false,"rule_set":["aff_me","yun_me"]},
      {"action":"route","outbound":"direct","ip_is_private":true},
      {"action":"route","outbound":"direct","domain_suffix":".ir"},
      {"action":"route","outbound":"direct","rule_set":["xal","loo"]},
      {"action":"route","outbound":"qqoli","domain_suffix":["time.android.com","time.windows.com","time.nist.gov","pool.ntp.org","dotnet.microsoft.com","download.visualstudio.microsoft.com"]},
      {"action":"route","outbound":"qqoli","domain":["answers.microsoft.com","docs.microsoft.com","download.microsoft.com","technet.microsoft.com","blogs.technet.microsoft.com","developer.microsoft.com","go.microsoft.com","learn.microsoft.com","support.microsoft.com","techcommunity.microsoft.com","www.microsoft.com","bing.com","www.bing.com","onegetcdn.azureedge.net","powershellgallery.azureedge.net","accounts.google.com","books.google.com","chrome.google.com","chromewebstore.google.com","code.google.com","consent.google.com","dns.google.com","docs.google.com","drive.google.com","encrypted.google.com","images.google.com","mail.google.com","maps.google.com","photos.google.com","play.google.com","scholar.google.com","sites.google.com","support.google.com","translate.google.com","trends.google.com","video.google.com","www.google.com","www.gstatic.com","translate.googleapis.com","developer.android.com","chopsdash.appspot.com","chrome-devtools-frontend.appspot.com","hostsaway.appspot.com","shaka-player-demo.appspot.com","support.apple.com","api.amazon.com","doc.aws.amazon.com","images.amazon.com","ip-ranges.amazonaws.com","db187550c7dkf.cloudfront.net","dqpnq362acqdi.cloudfront.net","ebay.doubleclick.net","cf-wkrs-pages-vless-aoy.pages.dev","edtunnel-b6t.pages.dev","malware-filter.pages.dev","phishing-filter.pages.dev","ublockorigin.pages.dev","cloudflare-scanner.vercel.app","cloudflare-v2ray.vercel.app","loon-gallery.vercel.app","piracy.vercel.app","proxy-provider-converter.vercel.app","reac-tube.vercel.app","sing-box-subscribe-doraemon.vercel.app","subc.vercel.app","sub-now-ten.vercel.app","v2rayfree-waline.vercel.app","sing-box-subscribe.vercel.app","trk.free.fr","f001.backblazeb2.com","music.163.com","c.y.qq.com"]},
      {"action":"route","outbound":"qqoli","rule_set":["oki","doki"]}
    ],
    "rule_set":[
      {
        "type":"remote",
        "tag":"aff_me",
        "format":"binary",
        "url":"https://raw.githubusercontent.com/liketolivefree/kobabi/main/aff_me.srs",
        "download_detour":"direct"
      },
      {
        "type":"remote",
        "tag":"yun_me",
        "format":"binary",
        "url":"https://raw.githubusercontent.com/liketolivefree/kobabi/main/yun_me.srs",
        "download_detour":"direct"
      },
      {
        "type":"remote",
        "tag":"oki",
        "format":"binary",
        "url":"https://raw.githubusercontent.com/liketolivefree/kobabi/main/oki.srs",
        "download_detour":"direct"
      },
      {
        "type":"remote",
        "tag":"doki",
        "format":"binary",
        "url":"https://raw.githubusercontent.com/liketolivefree/kobabi/main/doki.srs",
        "download_detour":"direct"
      },
      {
        "type":"remote",
        "tag":"xal",
        "format":"binary",
        "url":"https://raw.githubusercontent.com/liketolivefree/kobabi/main/xal.srs",
        "download_detour":"direct"
      },
      {
        "type":"remote",
        "tag":"loo",
        "format":"binary",
        "url":"https://raw.githubusercontent.com/liketolivefree/kobabi/main/loo.srs",
        "download_detour":"direct"
      }
    ]
  },
  "experimental":{
    "cache_file":{"enabled":true},
    "clash_api":{
      "external_controller":"127.0.0.1:9090",
      "external_ui":"dashboard",
      "external_ui_download_url":"https://gh-proxy.com/https://github.com/MetaCubeX/Yacd-meta/archive/gh-pages.zip",
      "external_ui_download_detour":"direct",
      "default_mode":"rule",
      "access_control_allow_origin":["http://127.0.0.1","https://yacd.metacubex.one"],
      "access_control_allow_private_network":true
    }
  }
}
